(()=>{"use strict";var e={975:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",s=0,i=-1,o=0,l=0;l<=e.length;++l){if(l<e.length)r=e.charCodeAt(l);else{if(47===r)break;r=47}if(47===r){if(i===l-1||1===o);else if(i!==l-1&&2===o){if(n.length<2||2!==s||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){-1===c?(n="",s=0):s=(n=n.slice(0,c)).length-1-n.lastIndexOf("/"),i=l,o=0;continue}}else if(2===n.length||1===n.length){n="",s=0,i=l,o=0;continue}t&&(n.length>0?n+="/..":n="..",s=2)}else n.length>0?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),s=l-i-1;i=l,o=0}else 46===r&&-1!==o?++o:o=-1}return n}var n={resolve:function(){for(var e,n="",s=!1,i=arguments.length-1;i>=-1&&!s;i--){var o;i>=0?o=arguments[i]:(void 0===e&&(e=process.cwd()),o=e),t(o),0!==o.length&&(n=o+"/"+n,s=47===o.charCodeAt(0))}return n=r(n,!s),s?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),s=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&s&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var s=arguments[r];t(s),s.length>0&&(void 0===e?e=s:e+="/"+s)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var s=1;s<e.length&&47===e.charCodeAt(s);++s);for(var i=e.length,o=i-s,l=1;l<r.length&&47===r.charCodeAt(l);++l);for(var c=r.length-l,a=o<c?o:c,u=-1,d=0;d<=a;++d){if(d===a){if(c>a){if(47===r.charCodeAt(l+d))return r.slice(l+d+1);if(0===d)return r.slice(l+d)}else o>a&&(47===e.charCodeAt(s+d)?u=d:0===d&&(u=0));break}var h=e.charCodeAt(s+d);if(h!==r.charCodeAt(l+d))break;47===h&&(u=d)}var g="";for(d=s+u+1;d<=i;++d)d!==i&&47!==e.charCodeAt(d)||(0===g.length?g+="..":g+="/..");return g.length>0?g+r.slice(l+u):(l+=u,47===r.charCodeAt(l)&&++l,r.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,s=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(r=e.charCodeAt(o))){if(!i){s=o;break}}else i=!1;return-1===s?n?"/":".":n&&1===s?"//":e.slice(0,s)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,s=0,i=-1,o=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var l=r.length-1,c=-1;for(n=e.length-1;n>=0;--n){var a=e.charCodeAt(n);if(47===a){if(!o){s=n+1;break}}else-1===c&&(o=!1,c=n+1),l>=0&&(a===r.charCodeAt(l)?-1==--l&&(i=n):(l=-1,i=c))}return s===i?i=c:-1===i&&(i=e.length),e.slice(s,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){s=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(s,i)},extname:function(e){t(e);for(var r=-1,n=0,s=-1,i=!0,o=0,l=e.length-1;l>=0;--l){var c=e.charCodeAt(l);if(47!==c)-1===s&&(i=!1,s=l+1),46===c?-1===r?r=l:1!==o&&(o=1):-1!==r&&(o=-1);else if(!i){n=l+1;break}}return-1===r||-1===s||0===o||1===o&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,s=e.charCodeAt(0),i=47===s;i?(r.root="/",n=1):n=0;for(var o=-1,l=0,c=-1,a=!0,u=e.length-1,d=0;u>=n;--u)if(47!==(s=e.charCodeAt(u)))-1===c&&(a=!1,c=u+1),46===s?-1===o?o=u:1!==d&&(d=1):-1!==o&&(d=-1);else if(!a){l=u+1;break}return-1===o||-1===c||0===d||1===d&&o===c-1&&o===l+1?-1!==c&&(r.base=r.name=0===l&&i?e.slice(1,c):e.slice(l,c)):(0===l&&i?(r.name=e.slice(1,o),r.base=e.slice(1,c)):(r.name=e.slice(l,o),r.base=e.slice(l,c)),r.ext=e.slice(o,c)),l>0?r.dir=e.slice(0,l-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{default:()=>h});function s(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,l)}c((n=n.apply(e,t||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;const i=require("obsidian"),o={rootDir:"33. RESOURCES/Lectures/class101",baseUrl:"http://125.133.148.194:4000",templateDir:"93. templates/class101",lectureFolder:"lectures",reviewFolder:"reviews",noteFolder:"notes",scriptFolder:"scripts",classFolder:"classes",overwrite:!1};class l extends i.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){const{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"Class101 ì„¤ì •"}),new i.Setting(e).setName("ë£¨íŠ¸ ë””ë ‰í† ë¦¬").setDesc("Class101 ê°•ì˜ ë…¸íŠ¸ê°€ ì €ì¥ë  ê¸°ë³¸ ê²½ë¡œì…ë‹ˆë‹¤.").addText((e=>e.setPlaceholder("ì˜ˆ: 33. RESOURCES/Lectures/class101").setValue(this.plugin.settings.rootDir).onChange((e=>s(this,void 0,void 0,(function*(){this.plugin.settings.rootDir=e,yield this.plugin.saveSettings()})))))),new i.Setting(e).setName("ê¸°ë³¸ URL").setDesc("Class101 API ì„œë²„ì˜ ê¸°ë³¸ URLì…ë‹ˆë‹¤.").addText((e=>e.setPlaceholder("ì˜ˆ: http://125.133.148.194:4000").setValue(this.plugin.settings.baseUrl).onChange((e=>s(this,void 0,void 0,(function*(){this.plugin.settings.baseUrl=e,yield this.plugin.saveSettings()})))))),new i.Setting(e).setName("í…œí”Œë¦¿ ë””ë ‰í† ë¦¬").setDesc("í…œí”Œë¦¿ íŒŒì¼ë“¤ì´ ì €ì¥ëœ ë””ë ‰í† ë¦¬ ê²½ë¡œì…ë‹ˆë‹¤.").addText((e=>e.setPlaceholder("ì˜ˆ: 93. templates/class101").setValue(this.plugin.settings.templateDir).onChange((e=>s(this,void 0,void 0,(function*(){this.plugin.settings.templateDir=e,yield this.plugin.saveSettings()})))))),new i.Setting(e).setName("íŒŒì¼ ë®ì–´ì“°ê¸°").setDesc("íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•  ê²½ìš° ë®ì–´ì“¸ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.").addToggle((e=>e.setValue(this.plugin.settings.overwrite).onChange((e=>s(this,void 0,void 0,(function*(){this.plugin.settings.overwrite=e,yield this.plugin.saveSettings()}))))));[{key:"lectureFolder",name:"ê°•ì˜",desc:"ê°•ì˜ íŒŒì¼"},{key:"reviewFolder",name:"ë¦¬ë·°",desc:"ë¦¬ë·° íŒŒì¼"},{key:"noteFolder",name:"ë…¸íŠ¸",desc:"ë…¸íŠ¸ íŒŒì¼"},{key:"scriptFolder",name:"ìë§‰",desc:"ìë§‰ íŒŒì¼"},{key:"classFolder",name:"í´ë˜ìŠ¤",desc:"í´ë˜ìŠ¤ íŒŒì¼"}].forEach((({key:t,name:r,desc:n})=>{new i.Setting(e).setName(`${r} í´ë”`).setDesc(`${n}ì´ ì €ì¥ë  í•˜ìœ„ ê²½ë¡œì…ë‹ˆë‹¤.`).addText((e=>e.setPlaceholder(`ì˜ˆ: ${t.replace("Folder","")}`).setValue(String(this.plugin.settings[t])).onChange((e=>s(this,void 0,void 0,(function*(){this.plugin.settings[t]=e,yield this.plugin.saveSettings()}))))))}))}}class c{constructor(e){this.baseUrl=e}getClassIds(){return s(this,void 0,void 0,(function*(){return this.fetchJson(`${this.baseUrl}/lecture/_repo/class101/json/myclassIds.json`)}))}getAllClasses(){return s(this,void 0,void 0,(function*(){return this.fetchJson(`${this.baseUrl}/lecture/_repo/class101/json/myclasses.json`)}))}fetchJson(e){return s(this,void 0,void 0,(function*(){try{console.log("Fetching JSON from:",e);const t=yield fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return yield t.json()}catch(t){throw console.error(`Error fetching JSON from ${e}:`,t),t}}))}fetchHtml(e){return s(this,void 0,void 0,(function*(){try{const t=yield fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return yield t.text()}catch(t){throw console.error(`Error fetching HTML from ${e}:`,t),t}}))}getClassInfo(e){return s(this,void 0,void 0,(function*(){const t=(yield this.fetchJson(`${this.baseUrl}/lecture/_repo/class101/json/myclasses.json`)).find((t=>t.classId===e));if(!t)throw new Error(`Class ID ${e} not found`);return t}))}getLectureInfo(e){return s(this,void 0,void 0,(function*(){return this.fetchJson(`${this.baseUrl}/lecture/_repo/class101/json/classes/${e}.json`)}))}getCategory(e){return s(this,void 0,void 0,(function*(){try{const[t,r,n]=yield Promise.all([this.fetchJson(`${this.baseUrl}/lecture/_repo/class101/json/myclasses.json`),this.fetchJson(`${this.baseUrl}/lecture/_repo/class101/json/subCategories.json`),this.fetchJson(`${this.baseUrl}/lecture/_repo/class101/json/categories.json`)]),s=t.find((t=>t.classId===e));if(!s)return"";const i=r.find((e=>e.categoryId===s.categoryId));if(!i)return"";const o=n.find((e=>e.categoryId===i.ancestorId));return o?`${o.title0}/${o.title}/${i.title}`:""}catch(e){return console.error("Error in getCategory:",e),""}}))}fetchAttachments(e,t){return s(this,void 0,void 0,(function*(){try{const r=`${this.baseUrl}/api/files/${e}/${t}`,n=yield fetch(r);if(!n.ok){if(404===n.status)return[];throw new Error(`HTTP error! status: ${n.status}`)}const s=yield n.json();return s.files&&Array.isArray(s.files)?s.files.filter((e=>!e.startsWith("@")&&!e.startsWith("."))):[]}catch(e){return console.error(`Error fetching attachments for lecture ${t}:`,e),[]}}))}getScriptContent(e,t,r){return s(this,void 0,void 0,(function*(){try{const e=`${this.baseUrl}/lecture/class101/${t}/${r}.vtt`,n=yield fetch(e);return n.ok?yield n.text():(console.log(`Script not found for lecture ${r}`),null)}catch(e){return console.error("Error getting script content:",e),null}}))}}var a=r(975);class u{constructor(e,t){this.app=e,this.settings=t}ensureFolder(e){return s(this,void 0,void 0,(function*(){var t;try{(yield this.app.vault.adapter.exists(e))||(yield this.app.vault.createFolder(e))}catch(e){if(!this.settings.overwrite||!(null===(t=e.message)||void 0===t?void 0:t.includes("Folder already exists")))throw e}}))}createFileWithOverwriteCheck(e,t){return s(this,void 0,void 0,(function*(){if((yield this.app.vault.adapter.exists(e))&&!this.settings.overwrite)throw new Error(`íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤: ${e}`);yield this.app.vault.create(e,t)}))}getTemplate(e){return s(this,void 0,void 0,(function*(){try{const t=(0,a.join)(this.settings.templateDir,`${e}.md`);return yield this.app.vault.adapter.read(t)}catch(t){return console.error(`Error reading ${e} template:`,t),this.getDefaultTemplate(e)}}))}getDefaultTemplate(e){switch(e){case"review":return"---\ntitle: {{lectureTitle}}\nviewCount: 0\ndifficulty: 3\nlikeability: 3\ntags:\n  - review/class101\n---\n\n### ì •ë¦¬/ìš”ì•½\n\n\n\n### 3ì¤„í‰\n\n\n### ì›ë³¸ ë…¸íŠ¸\n\n[[{{noteTitle}}|ê°•ì˜ë…¸íŠ¸]]\n\n";case"lecture":return'---\ntitle: {{title}}\nsource: {{source}}\nduration: {{duration}}\ncategory: {{category}}\ntags: {{tags}}\n---\n\n<video controls>\n  <source src="{{videoUrl}}">\n</video>\n\n{{navigationLinks}}\n\n## ë¦¬ë·°\n{{reviewLink}}\n\n## ë…¸íŠ¸\n{{noteLink}}\n\n## ìë§‰\n{{scriptLink}}\n';default:return""}}createClassList(e){return s(this,void 0,void 0,(function*(){var t,r;try{new i.Notice("í´ë˜ìŠ¤ ëª©ë¡ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...");let n="| ì œëª© | ì¹´í…Œê³ ë¦¬ | í¬ë¦¬ì—ì´í„° | ë§í¬ |\n";n+="|------|-----------|------------|------|\n";for(const s of e){const e=s.title.replace(/\|/g,"\\|"),i=(null===(t=s.categoryTitle)||void 0===t?void 0:t.replace(/\|/g,"\\|"))||"",o=(null===(r=s.creatorName)||void 0===r?void 0:r.replace(/\|/g,"\\|"))||"";n+=`| ${e} | ${i} | ${o} | ${`[[${this.sanitizeName(e)}|ğŸ”—]]`} |\n`}const s=`---\ntitle: class101\ntags: \n  - lecture/class101\n---\n\n## í´ë˜ìŠ¤ ëª©ë¡\n\n${n}`,o=(0,a.join)(this.settings.rootDir,"myclasses.md");yield this.createFileWithOverwriteCheck(o,s),new i.Notice("í´ë˜ìŠ¤ ëª©ë¡ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(e){console.error("Error creating class list:",e),new i.Notice("í´ë˜ìŠ¤ ëª©ë¡ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}))}sanitizeName(e){return e.replace(/\[/g,"(").replace(/\]/g,")").replace(/[^\uAC00-\uD7A3a-zA-Z0-9_\(\)\<\>,\s]/g,"").replace(/\s+/g," ").trim()}}class d{constructor(e){this.currentClassId=null,this.currentLectureSlug=null,this.baseUrl=e}setContext(e,t){this.currentClassId=e,this.currentLectureSlug=t}convertHtmlToMarkdown(e){return s(this,arguments,void 0,(function*(e,t=[]){try{if(!e)return"";const r=function(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<!--[\s\S]*?-->/g,"")}(e),n=(new DOMParser).parseFromString(r,"text/html");!function(e){var t,r,n;const s=e.evaluate("//h3[contains(text(), 'ì²¨ë¶€')]",e,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<s.snapshotLength;e++){const i=s.snapshotItem(e);if(!i)continue;let o=i;for(;o&&o.nextElementSibling&&o.nextElementSibling instanceof HTMLElement&&!(null===(t=o.nextElementSibling.textContent)||void 0===t?void 0:t.trim().startsWith("ìˆ˜ì—… ë…¸íŠ¸"));){const e=o.nextElementSibling;null===(r=o.parentNode)||void 0===r||r.removeChild(o),o=e}o&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))}}(n);let s="";t.length>0&&this.currentClassId&&this.currentLectureSlug&&(s+=`### ì²¨ë¶€ íŒŒì¼\n\n${t.map((e=>{const t=encodeURIComponent(e);return`[${e}](${this.baseUrl}/lecture/_repo/class101/html/classes/${this.currentClassId}/${this.currentLectureSlug}/files/${t})`})).join("\n\n")}\n\n`),s+="### ìˆ˜ì—… ë…¸íŠ¸\n\n";return s+=this.processNode(n.body).replace(/### ìˆ˜ì—… ë…¸íŠ¸\n\n/g,""),this.cleanupMarkdown(s)}catch(e){return console.error("Error converting HTML to Markdown:",e),""}}))}processNode(e){var t;if(!e)return"";if(e.nodeType===Node.TEXT_NODE){const r=(null===(t=e.textContent)||void 0===t?void 0:t.trim())||"";return r?r+" ":""}if(e.nodeType!==Node.ELEMENT_NODE)return"";const r=e,n=r.tagName.toLowerCase();let s="";const i=Array.from(r.childNodes).map((e=>this.processNode(e))).join("").trim();switch(n){case"h1":s=`# ${i}\n\n`;break;case"h2":s=`## ${i}\n\n`;break;case"h3":s=`### ${i}\n\n`;break;case"h4":s=`#### ${i}\n\n`;break;case"h5":s=`##### ${i}\n\n`;break;case"h6":s=`###### ${i}\n\n`;break;case"p":case"div":s=`${i}\n\n`;break;case"strong":case"b":s=` **${i}** `;break;case"em":case"i":s=` *${i}* `;break;case"a":const e=r.getAttribute("href");s=e?`[${i}](${e})`:i;break;case"img":const t=r.getAttribute("src"),n=function(e){try{if(!/[Ã¬|Ã­|Ã«|Ãª|Ã¥|Ã£]/.test(e))return e;const t=e.split("").map((e=>e.charCodeAt(0)));return new TextDecoder("utf-8").decode(new Uint8Array(t))}catch(t){return console.error("Error fixing broken Korean:",t),e}}(r.getAttribute("alt")||"");s=t?`![${n}](${t})\n\n`:"";break;case"ul":s=Array.from(r.children).map((e=>`- ${this.processNode(e)}`)).join("\n\n")+"\n\n";break;case"ol":s=Array.from(r.children).map(((e,t)=>`${t+1}. ${this.processNode(e)}`)).join("\n\n")+"\n\n";break;case"li":default:s=i;break;case"br":s="\n\n";break;case"code":s=`\`${i}\``;break;case"pre":s=`\`\`\`\n${i}\n\`\`\`\n\n`;break;case"blockquote":s=`> ${i}\n\n`}return s}cleanupMarkdown(e){return e.replace(/\*\*([^*\n]+)\*\*(\s*)\*\*/g," **$1** ").replace(/\n{3,}/g,"\n\n").replace(/\s+\n/g,"\n").replace(/\n\s+/g,"\n").replace(/([^\n])\n([^\n])/g,"$1\n\n$2").replace(/^\s+|\s+$/g,"").replace(/(!\[[^\]]*\]\([^)]+\))([^\n])/g,"$1\n\n$2").trim()}parseVTT(e){try{const t=e.split("\n");let r="",n=!0;for(const e of t){if(n){""===e.trim()&&(n=!1);continue}if(/^\d+$/.test(e.trim()))continue;if(e.includes("--\x3e"))continue;if(""===e.trim())continue;if(e.includes("X-TIMESTAMP-MAP"))continue;const t=e.trim();t&&(r+=t+"\n")}return r.trim()}catch(e){return console.error("Error parsing VTT:",e),""}}}class h extends i.Plugin{constructor(){super(...arguments),this.currentClassId=null,this.currentLectureSlug=null}onload(){return s(this,void 0,void 0,(function*(){yield this.loadSettings(),this.apiClient=new c(this.settings.baseUrl),this.fileManager=new u(this.app,this.settings),this.converter=new d(this.settings.baseUrl),console.log("Class101 í”ŒëŸ¬ê·¸ì¸ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤."),this.addSettingTab(new l(this.app,this)),this.addCommand({id:"process-single-class",name:"Process Single Class from Clipboard",callback:()=>this.processSingleClass()}),this.addCommand({id:"process-all-classes",name:"Process All Classes from Server",callback:()=>this.processAllClasses()}),this.addCommand({id:"process-in-file",name:"Process Classes from Current File",callback:()=>this.processInFile()}),this.addCommand({id:"create-class-list",name:"Create Class List",callback:()=>this.createClassList()})}))}onunload(){console.log("Class101 í”ŒëŸ¬ê·¸ì¸ì´ ì–¸ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.")}loadSettings(){return s(this,void 0,void 0,(function*(){this.settings=Object.assign({},o,yield this.loadData())}))}saveSettings(){return s(this,void 0,void 0,(function*(){yield this.saveData(this.settings)}))}extractClassId(e){try{if(console.log("URL ë¶„ì„:",e),!e.includes("/"))return console.log("ì§ì ‘ ì…ë ¥ëœ classId:",e),e;if(e.includes("class101.net/ko/classes/")){const t=e.split("classes/")[1].split("/")[0];return console.log("ë§¤ì¹­ëœ classId:",t),t}if(e.includes("class101.net/classes/")){const t=e.split("classes/")[1].split("/")[0];return console.log("ë§¤ì¹­ëœ classId:",t),t}return null}catch(e){return console.error("URL ë³€í™˜ ì˜¤ë¥˜:",e),null}}processSingleClass(){return s(this,void 0,void 0,(function*(){try{const e=yield navigator.clipboard.readText();console.log("í´ë¦½ë³´ë“œ ë‚´ìš©:",e);const t=this.extractClassId(e);if(console.log("ì¶”ì¶œëœ classId:",t),!t)return void new i.Notice("ìœ íš¨í•œ Class101 URLì´ í´ë¦½ë³´ë“œì— ì—†ìŠµë‹ˆë‹¤.");new i.Notice("ê°•ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ìˆìŠµë‹ˆë‹¤..."),yield this.generateMarkdown(t)}catch(e){console.error("Error:",e),new i.Notice(`ê°•ì˜ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${e.message}`)}}))}processAllClasses(){return s(this,void 0,void 0,(function*(){try{new i.Notice("ì„œë²„ì—ì„œ í´ë˜ìŠ¤ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘...");const e=yield this.apiClient.getClassIds();if(!Array.isArray(e)||0===e.length)return void new i.Notice("ì²˜ë¦¬í•  í´ë˜ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.");new i.Notice(`${e.length}ê°œì˜ í´ë˜ìŠ¤ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤...`);for(const t of e)try{new i.Notice(`í´ë˜ìŠ¤ ì²˜ë¦¬ ì¤‘: ${t}`),yield this.generateMarkdown(t)}catch(e){console.error(`Error processing class ${t}:`,e),new i.Notice(`í´ë˜ìŠ¤ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${t}`)}new i.Notice("ëª¨ë“  í´ë˜ìŠ¤ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(e){console.error("Error in processAllClasses:",e),new i.Notice("í´ë˜ìŠ¤ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}))}processInFile(){return s(this,void 0,void 0,(function*(){try{const e=this.app.workspace.getActiveFile();if(!e)return void new i.Notice("ì²˜ë¦¬í•  íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");const t=yield this.app.vault.read(e);console.log("íŒŒì¼ ë‚´ìš©:",t);const r=t.split("\n").map((e=>e.trim().replace(/\s+/g,"")));console.log("ë¶„ë¦¬ëœ ì¤„:",r);const n=r.filter((e=>{const t=e.length>20&&/^[a-zA-Z0-9\/:]+$/.test(e);return console.log(`ë¼ì¸ "${e}": ê¸¸ì´=${e.length}, ìœ íš¨ì„±=${t}`),t}));if(console.log("ìœ íš¨í•œ ì¤„:",n),0===n.length)return void new i.Notice("ì²˜ë¦¬í•  ìœ íš¨í•œ classId/URLì´ ì—†ìŠµë‹ˆë‹¤.");new i.Notice(`${n.length}ê°œì˜ í´ë˜ìŠ¤ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤...`);for(const e of n)try{const t=this.extractClassId(e);console.log(`ì²˜ë¦¬ ì¤‘ì¸ ë¼ì¸: "${e}", ì¶”ì¶œëœ classId: ${t}`),t&&(new i.Notice(`í´ë˜ìŠ¤ ì²˜ë¦¬ ì¤‘: ${t}`),yield this.generateMarkdown(t))}catch(t){console.error(`Error processing class ${e}:`,t),new i.Notice(`í´ë˜ìŠ¤ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${e}`)}new i.Notice("ëª¨ë“  í´ë˜ìŠ¤ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(e){console.error("Error in processInFile:",e),new i.Notice("í´ë˜ìŠ¤ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}))}createClassList(){return s(this,void 0,void 0,(function*(){try{const e=yield this.apiClient.getAllClasses();yield this.fileManager.createClassList(e)}catch(e){console.error("Error in createClassList:",e),new i.Notice("í´ë˜ìŠ¤ ëª©ë¡ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}}))}generateMarkdown(e){return s(this,void 0,void 0,(function*(){}))}}var g=exports;for(var f in n)g[f]=n[f];n.__esModule&&Object.defineProperty(g,"__esModule",{value:!0})})();